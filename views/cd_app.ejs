<!DOCTYPE html>
<html>
  <%- include("fragments/head.ejs") %>

  <body>
    <%- include("fragments/header.ejs") %>

    <script src="/public/js/cd-scripts.js"></script>

    <script type="module">
      const base_url = "<%= base_uri %>"

      import { CDServiceProxy } from "/models/cd-proxy.mjs"
      import { CD } from "/models/cd.mjs"
      console.log("imported successful")
      // make these two available to global scripts
      window.cdService = new CDServiceProxy(base_url)
      window.CD = CD
      populateCDTable()
    </script>

    <section id="cd_page" style="display: none">
      <%- include("fragments/cd-list.ejs") %>
      <%- include("fragments/cd-details.ejs") %>
    </section>

    <script>
      changePage("cd_page")
    </script>

    <%- include("fragments/footer.ejs") %>
  </body>
</html>
